
/*@preserve
***Version 2.28.0***
*/

/*@license
 *                       Copyright 2002 - 2018 Qualtrics, LLC.
 *                                All rights reserved.
 *
 * Notice: All code, text, concepts, and other information herein (collectively, the
 * "Materials") are the sole property of Qualtrics, LLC, except to the extent
 * otherwise indicated. The Materials are proprietary to Qualtrics and are protected
 * under all applicable laws, including copyright, patent (as applicable), trade
 * secret, and contract law. Disclosure or reproduction of any Materials is strictly
 * prohibited without the express prior written consent of an authorized signatory
 * of Qualtrics. For disclosure requests, please contact notice@qualtrics.com.
 */

try {
  (window["WAFQualtricsWebpackJsonP-cloud-2.28.0"]=window["WAFQualtricsWebpackJsonP-cloud-2.28.0"]||[]).push([[18],{66:function(e,t,n){"use strict";n.r(t);var o=n(4),r=n(5),i=n(30),a=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a},u=function(e){var t=e.translations,n=e.translationSettings,u=e.question,s=e.recordResponseAndProceed,c=e.isFollowUp,d=e.preloadRendererForQID,l=a(Object(r.useState)(null),2),f=l[0],b=l[1],p=a(Object(r.useState)(null),2),v=p[0],O=p[1],g=a(Object(r.useState)(null),2),y=g[0],w=g[1],S=y;return null!==y&&f===u.QID&&v!==u.Style&&(w(null),S=null),Object(r.useEffect)((function(){var e=u.Format,t=u.Style;Object(i.a)(e,t).then((function(e){w((function(){return e})),b(u.QID),O(u.Style)}))}),[u]),null!==S&&f===u.QID?Object(o.h)(S,{translations:t,translationSettings:n,question:u,recordResponseAndProceed:s,isFollowUp:c,preloadRendererForQID:d}):Object(o.h)("div",null)},s=n(15),c=n(25);function d(e){window.QSI.dbg.e(e)}var l=n(7),f=n(6),b=Object(r.createContext)(null);var p=n(38),v=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a};function O(e){var t,n,o;switch(e.questionConfiguration.Format){case"embedded-feedback-question-format-open-text":return(t={})[e.questionConfiguration.SurveyQuestionId]=e.recordedResponse,t;case"embedded-feedback-question-format-points":case"embedded-feedback-question-format-yes-no":default:return(n={})[e.questionConfiguration.SurveyQuestionId]=((o={})[e.recordedResponse]={selected:!0},o),n}}var g=function(e){var t,n,a=e.interceptOptions,g=a.id,y=a.surveyId,w=a.targetURLOrigin,S=Object(f.b)(b),m=S.Questions,j=v(Object(r.useState)(0),2),h=j[0],Q=j[1],I=v(Object(r.useState)(!1),2),C=I[0],R=I[1],q=v(Object(r.useState)(!1),2),k=q[0],P=q[1],D=v(Object(r.useState)(!1),2),E=D[0],F=D[1],x=w+"/DX/PostResponse/?SurveyId="+y+"&InterceptId="+g,T=window.QSI.global.featureFlags["DX.EmbeddedFeedback_NewAPIs"],A=(t=m,n=Object(r.useRef)(),Object(r.useEffect)((function(){n.current=t})),n.current);if(a.isPreview&&A)if(A.length!==m.length)Q(0);else if(A[0].Style!==m[0].Style)Q(0);else for(var L=0;L<m.length;L++)if(m[L].QuestionText!==A[L].QuestionText){Q(L);break}var _=Object(l.b)().legacyCreativeVal,U=Object(p.a)(y,g,_.requestId,S.SurveyVersionId),J=U.enqueueResponse,M=U.closeSurvey,N=Object(r.useMemo)((function(){return m.map((function(e){return{questionConfiguration:e,recordedResponse:null}}))}),[m]),W=N[h],X=s.a.getTranslation(S),B=s.a.getTranslationCode(S),H=function(e){d("Q_PostResponse returned error status:  "+e.status+" details: "+e.statusText)},V=Object(r.useCallback)((function(){if(T)M();else{if(E)return;e="POST",t=x,n=G(),o=H,(r=new XMLHttpRequest).open(e,t,!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onreadystatechange=function(){try{4===r.readyState&&(200!==r.status?o(r):window.QSI.config.surveyResponseId=r.responseText)}catch(e){d(e)}},r.send(n),F(!0)}var e,t,n,o,r}),[N,E,T,M]),z=Object(r.useCallback)((function(){var e={};return N.forEach((function(t){t.recordedResponse&&(e[t.questionConfiguration.SurveyQuestionId]=t.recordedResponse)})),JSON.stringify(e)}),[N]),G=Object(r.useCallback)((function(){var e=c.a.getEmbeddedData(g);return null!==B&&(e.Q_Language=B),"Q_PostResponse="+encodeURIComponent(z())+"&ED="+encodeURIComponent(JSON.stringify(e))}),[]),K=function(){$("",!0)},Y=Object(r.useCallback)((function(){if(!E&&!T)if(navigator&&navigator.sendBeacon){var e=new FormData;e.append("Q_PostResponse",z());var t=c.a.getEmbeddedData(g);null!==B&&(t.Q_Language=B),e.append("ED",JSON.stringify(t)),navigator.sendBeacon(x,e)}else V()}),[E]);Object(r.useEffect)((function(){if(k&&"embedded-feedback-question-format-display-text"!=W.questionConfiguration.Format){var e=6e5;window.QSI&&window.QSI.config&&window.QSI.config.followupQuestionTimeoutMS&&(e=window.QSI.config.followupQuestionTimeoutMS);var t=window.setTimeout(K,e);return window.addEventListener("beforeunload",Y),function(){window.removeEventListener("beforeunload",Y),window.clearTimeout(t)}}}),[k,E,W]);var Z=function(e){if(!e)return h+1;for(var t=0;t<N.length;t++)if(N[t].questionConfiguration.QID===e)return t;return h+1},$=Object(r.useCallback)((function(e,t,n){if(W.recordedResponse=e,k||a.isPreview||_.clickWithImpression(),!a.isPreview){if(T){var o=c.a.getEmbeddedData(g);null!==B&&(o.Q_Language=B),J({embeddedData:o,recordedResponse:O(W)})}t&&V()}if("End"!==n){var r=Z(n);r>=N.length?R(!0):(P(!0),Q(r))}else R(!0)}),[N,W,h,E,_]);return C||!W?null:Object(o.h)(u,{translations:X,translationSettings:S.TranslationSettings,question:W.questionConfiguration,recordResponseAndProceed:$,isFollowUp:k,preloadRendererForQID:function(e){if("End"!==e){var t=Z(e);if(!(t>=N.length)){var n=N[t].questionConfiguration,o=n.Format,r=n.Style;Object(i.a)(o,r)}}}})},y=n(37),w=n(13),S=n(36),m=n(8),j=function(e){var t=e.creativeOptions,n=e.interceptOptions,r=t.Insertion,i=r.Selector,a=r.MaxNumberOfInsertions,u=Object(S.a)(t),s=u.Questions[0].Appearance.CustomCSS,c=Object(w.a)(s),d=Object(y.a)(g,n,i,c,a);return Object(o.h)(m.a.Provider,{value:n},Object(o.h)(b.Provider,{value:u},d))},h=n(35);n.d(t,"renderEmbeddedFeedback",(function(){return I}));var Q=function(){return(Q=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function I(e,t,n){var r={interceptOptions:t,creativeOptions:e},i=document.createElement("div");return i.style.display="none",Object(o.k)(Object(o.h)(h.a,{legacyCreative:n},Object(o.h)(j,Q({},r))),document.body.appendChild(i)),{remove:function(){Object(o.k)(null,i),document.body.contains(i)&&document.body.removeChild(i)}}}},8:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var o=n(6),r=n(5),i=Object(r.createContext)(null),a=function(){return Object(o.b)(i)}}}]);
} catch(e) {
  if (typeof QSI !== 'undefined' && QSI.dbg && QSI.dbg.e) {
    QSI.dbg.e(e);
  }
}